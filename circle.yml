version: 2
jobs:
  build:
    docker:
      - image: "circleci/node:6"
    steps:
      - "checkout"
      -
        restore_cache:
          key: "yarn-{{ .Branch }}-{{ checksum \"yarn.lock\" }}"
      - run: "yarn install"
      - run: "yarn lint"
      - run: "yarn test"
      - run: "bash <(curl -s https://codecov.io/bash) -t $CODECOV_TOKEN"
      -
        save_cache:
          key: "yarn-{{ .Branch }}-{{ checksum \"yarn.lock\" }}"
          paths:
            - "~/.yarn-cache"
